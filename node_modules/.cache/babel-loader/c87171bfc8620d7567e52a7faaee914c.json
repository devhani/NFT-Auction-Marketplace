{"ast":null,"code":"'use strict';\n\nvar _regeneratorRuntime = require(\"/home/ciberexplosion/Desktop/starter_kit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/home/ciberexplosion/Desktop/starter_kit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _asyncIterator = require(\"/home/ciberexplosion/Desktop/starter_kit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncIterator\");\n\nvar errCode = require('err-code');\n\nvar _require = require('ipfs-utils/src/globalthis'),\n    Blob = _require.Blob;\n\nvar itPeekable = require('it-peekable');\n\nvar browserStreamToIt = require('browser-readablestream-to-it');\n\nvar all = require('it-all');\n\nvar _require2 = require('./utils'),\n    isBytes = _require2.isBytes,\n    isBlob = _require2.isBlob,\n    isReadableStream = _require2.isReadableStream;\n/**\n * @param {import('./normalise-input').ToContent} input\n * @returns {Promise<Blob>}\n */\n\n\nfunction toBlob(_x) {\n  return _toBlob.apply(this, arguments);\n}\n/**\n * @param {AsyncIterable<BlobPart>|Iterable<BlobPart>} stream\n * @returns {Promise<Blob>}\n */\n\n\nfunction _toBlob() {\n  _toBlob = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(input) {\n    var peekable, _ref, value, done;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(isBytes(input) || typeof input === 'string' || input instanceof String)) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", new Blob([input]));\n\n          case 2:\n            if (!isBlob(input)) {\n              _context.next = 4;\n              break;\n            }\n\n            return _context.abrupt(\"return\", input);\n\n          case 4:\n            // Browser stream\n            if (isReadableStream(input)) {\n              input = browserStreamToIt(input);\n            } // (Async)Iterator<?>\n\n\n            if (!(input[Symbol.iterator] || input[Symbol.asyncIterator])) {\n              _context.next = 26;\n              break;\n            }\n\n            /** @type {any} peekable */\n            peekable = itPeekable(input);\n            /** @type {any} value **/\n\n            _context.next = 9;\n            return peekable.peek();\n\n          case 9:\n            _ref = _context.sent;\n            value = _ref.value;\n            done = _ref.done;\n\n            if (!done) {\n              _context.next = 14;\n              break;\n            }\n\n            return _context.abrupt(\"return\", itToBlob(peekable));\n\n          case 14:\n            peekable.push(value); // (Async)Iterable<Number>\n\n            if (!Number.isInteger(value)) {\n              _context.next = 24;\n              break;\n            }\n\n            _context.t0 = Blob;\n            _context.t1 = Uint8Array;\n            _context.next = 20;\n            return all(peekable);\n\n          case 20:\n            _context.t2 = _context.sent;\n            _context.t3 = _context.t1.from.call(_context.t1, _context.t2);\n            _context.t4 = [_context.t3];\n            return _context.abrupt(\"return\", new _context.t0(_context.t4));\n\n          case 24:\n            if (!(isBytes(value) || typeof value === 'string' || value instanceof String)) {\n              _context.next = 26;\n              break;\n            }\n\n            return _context.abrupt(\"return\", itToBlob(peekable));\n\n          case 26:\n            throw errCode(new Error(\"Unexpected input: \".concat(input)), 'ERR_UNEXPECTED_INPUT');\n\n          case 27:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _toBlob.apply(this, arguments);\n}\n\nfunction itToBlob(_x2) {\n  return _itToBlob.apply(this, arguments);\n}\n\nfunction _itToBlob() {\n  _itToBlob = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(stream) {\n    var parts, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            parts = [];\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _context2.prev = 3;\n            _iterator = _asyncIterator(stream);\n\n          case 5:\n            _context2.next = 7;\n            return _iterator.next();\n\n          case 7:\n            _step = _context2.sent;\n            _iteratorNormalCompletion = _step.done;\n            _context2.next = 11;\n            return _step.value;\n\n          case 11:\n            _value = _context2.sent;\n\n            if (_iteratorNormalCompletion) {\n              _context2.next = 18;\n              break;\n            }\n\n            chunk = _value;\n            parts.push(chunk);\n\n          case 15:\n            _iteratorNormalCompletion = true;\n            _context2.next = 5;\n            break;\n\n          case 18:\n            _context2.next = 24;\n            break;\n\n          case 20:\n            _context2.prev = 20;\n            _context2.t0 = _context2[\"catch\"](3);\n            _didIteratorError = true;\n            _iteratorError = _context2.t0;\n\n          case 24:\n            _context2.prev = 24;\n            _context2.prev = 25;\n\n            if (!(!_iteratorNormalCompletion && _iterator.return != null)) {\n              _context2.next = 29;\n              break;\n            }\n\n            _context2.next = 29;\n            return _iterator.return();\n\n          case 29:\n            _context2.prev = 29;\n\n            if (!_didIteratorError) {\n              _context2.next = 32;\n              break;\n            }\n\n            throw _iteratorError;\n\n          case 32:\n            return _context2.finish(29);\n\n          case 33:\n            return _context2.finish(24);\n\n          case 34:\n            return _context2.abrupt(\"return\", new Blob(parts));\n\n          case 35:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[3, 20, 24, 34], [25,, 29, 33]]);\n  }));\n  return _itToBlob.apply(this, arguments);\n}\n\nmodule.exports = toBlob;","map":null,"metadata":{},"sourceType":"script"}